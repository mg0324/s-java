**RPC如何选择网络模型？**

## 前言
我们知道RPC中网络通信是最基础的前提，所以就要选择合适的网络模型来支持。
说到网络通信，其实就是所谓的2台PC之间的网络通信，实际上就是2台PC对网络IO的操作。

## 几种常用的网络模型
而网络模型的发展其实是需要操作系统内核的支持的，所以有了如下4种常见的网络IO模型，分别是 `同步阻塞IO（BIO）`、`同步非阻塞IO（NIO）`、`IO多路复用` 和 `异步非阻塞IO（AIO）`，其中只有 `AIO` 是`异步IO`，其他的都是`同步IO`。

其中，最常用的就是`同步阻塞IO`和`IO多路复用`。

### 同步阻塞IO（BIO）
blocking IO，同步阻塞IO是最简单、最常见的IO模型。在linux中，默认情况下所有`socket`都是`blocking`的。

``` plantuml
@startuml
应用进程 -> 系统内核: 1.发起IO系统调用，应用进程被阻塞
系统内核 -> 系统内核: 2.内核开始等待数据
系统内核 -> 应用进程: 3.系统内核等待到数据后copy到用户内存并返回
应用进程 -> 应用进程: 4.应用进程解除阻塞状态，继续运行业务逻辑
@enduml
```

从上面的流程图可以看出，系统内核处理IO操作分为`等待数据`和`拷贝数据`二个阶段，而在这2个阶段应用进程都是处在阻塞状态的。如果使用Java多线程开发，则每一个IO操作都需要占用一个线程，直到IO操作结束。

**这个流程就好比我们去餐厅吃饭，我们到达餐厅，向服务员点餐，之后我们一直在餐厅等待后厨将菜做好，然后服务员会把菜端给我们，我们才能开始享用。**


### 同步非阻塞IO（NIO）

### IO多路复用

### 异步非阻塞IO（AIO）
